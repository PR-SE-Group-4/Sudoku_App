<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="de"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Loader.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Sudoku_App$Junittests.exec</a> &gt; <a href="index.source.html" class="el_package">app</a> &gt; <span class="el_source">Loader.java</span></div><h1>Loader.java</h1><pre class="source lang-java linenums">package app;

import model.*;

import java.io.*;
import java.util.ArrayList;

<span class="nc" id="L8">public class Loader {</span>

    private static File[] files;
    private ArrayList&lt;Puzzle&gt; storedPuzzles;

    // -------------------------------------------
    // -- setup game for first use --------------
    // ------------------------------------------

    public static void setup() {
        //creates filesave dir if not present
        //creates two puzzles if not present
<span class="nc" id="L20">        File appdir = new File(System.getenv(&quot;APPDATA&quot;)+&quot;\\SudokuGR04&quot;);</span>
<span class="nc" id="L21">        appdir.mkdir();</span>
        try {
<span class="nc" id="L23">            File presaved00 = new File(appdir + &quot;\\supereasy.txt&quot;);</span>
<span class="nc" id="L24">            presaved00.createNewFile();</span>
<span class="nc" id="L25">            FileWriter presaved00wr = new FileWriter(presaved00);</span>
<span class="nc" id="L26">            presaved00wr.write(&quot;EASY;CLASSIC;false;000000;1U0-1O0-1O3-2O4-2O5-2O6-3O7-3U0-3O9-1O4-1O5-1O6-2O7-2O8-2U0-3O1-3O2-3O3-1O7-1O8-1O9-2U0-2O2-2O3-3O4-3O5-3O6-4O2-4U0-4O4-5O5-5O6-5O7-6O8-6O9-6U0-4O5-4O6-4O7-5O8-5O9-5O1-6U0-6O3-6O4-4O8-4O9-4O1-5O2-5U0-5O4-6O5-6O6-6O7-7O3-7O4-7U0-8O6-8O7-8O8-9O9-9O1-9O2-7U0-7O7-7O8-8O9-8O1-8O2-9O3-9U0-9O5-7O9-7O1-7O2-8O3-8O4-8U0-9O6-9O7-9O8-;&quot;);</span>
<span class="nc" id="L27">            presaved00wr.close();</span>
<span class="nc" id="L28">            File presaved01 = new File(appdir + &quot;\\medium01.txt&quot;);</span>
<span class="nc" id="L29">            presaved01.createNewFile();</span>
<span class="nc" id="L30">            FileWriter presaved01wr = new FileWriter(presaved01);</span>
<span class="nc" id="L31">            presaved01wr.write(&quot;NORMAL;CLASSIC;false;000000;1U0-1U0-1O4-2U0-2O8-2O6-3U0-3O1-3U0-1U0-1O1-1U0-2U0-2O3-2U0-3U0-3U0-3O4-1U0-1U0-1O3-2O2-2U0-2O4-3O6-3O9-3U0-4O1-4U0-4O5-5O6-5O7-5U0-6U0-6U0-6O3-4O8-4U0-4U0-5U0-5U0-5U0-6U0-6O5-6U0-4U0-4U0-4O2-5U0-5O5-5U0-6O4-6U0-6O9-7U0-7U0-7U0-8U0-8U0-8U0-9O9-9U0-9U0-7O3-7U0-7O6-8U0-8O9-8O1-9O7-9U0-9U0-7U0-7O8-7U0-8U0-8U0-8U0-9U0-9U0-9U0-;&quot;);</span>
<span class="nc" id="L32">            presaved01wr.close();</span>
<span class="nc" id="L33">            File presaved02 = new File(appdir + &quot;\\samurai01.txt&quot;);</span>
<span class="nc" id="L34">            presaved02.createNewFile();</span>
<span class="nc" id="L35">            FileWriter presaved02wr = new FileWriter(presaved02);</span>
<span class="nc" id="L36">            presaved02wr.write(&quot;HARD;SAMURAI;false;000000;1O2-1U0-1O5-2U0-2U0-2U0-3O9-3U0-3O4-1U0-1O7-1U0-2U0-2U0-2U0-3U0-3O5-3U0-1O8-1U0-1U0-2U0-2O6-2U0-3U0-3U0-3O1-4U0-4U0-4U0-5O4-5U0-5O9-6U0-6U0-6U0-4U0-4U0-4O6-5U0-5U0-5U0-6O2-6U0-6U0-4U0-4U0-4U0-5O6-5U0-5O2-6U0-6U0-6U0-7O4-7U0-7U0-8U0-8O8-8U0-9U0-9U0-9O9-7U0-7O3-7U0-8U0-8U0-8U0-9U0-9O1-9U0-7O1-7U0-7O8-8U0-8U0-8U0-9O4-9U0-9O7-x1O6-1U0-1O7-2U0-2U0-2U0-3O3-3U0-3O1-1U0-1O9-1U0-2U0-2U0-2U0-3U0-3O7-3U0-1O1-1U0-1U0-2U0-2O2-2U0-3U0-3U0-3O9-4U0-4U0-4U0-5O1-5U0-5O4-6U0-6U0-6U0-4U0-4U0-4O3-5U0-5U0-5U0-6O5-6U0-6U0-4U0-4U0-4U0-5O2-5U0-5O8-6U0-6U0-6U0-7O5-7U0-7U0-8U0-8O6-8U0-9U0-9U0-9O4-7U0-7O4-7U0-8U0-8U0-8U0-9U0-9O8-9U0-7O8-7U0-7O6-8U0-8U0-8U0-9O1-9U0-9O5-x1U0-1U0-1O9-2U0-2U0-2U0-3O5-3U0-3U0-1U0-1O1-1U0-2U0-2U0-2U0-3U0-3O4-3U0-1O4-1U0-1O7-2U0-2U0-2U0-3O8-3U0-3O6-4U0-4U0-4U0-5O4-5U0-5O3-6U0-6U0-6U0-4U0-4U0-4U0-5U0-5O7-5U0-6U0-6U0-6U0-4U0-4U0-4U0-5O2-5U0-5O9-6U0-6U0-6U0-7O1-7U0-7O4-8U0-8U0-8U0-9O2-9U0-9O5-7U0-7O9-7U0-8U0-8U0-8U0-9U0-9O1-9U0-7U0-7U0-7O8-8U0-8U0-8U0-9O4-9U0-9U0-x1O8-1U0-1O9-2U0-2U0-2U0-3O1-3U0-3O4-1U0-1O4-1U0-2U0-2U0-2U0-3U0-3O9-3U0-1O2-1U0-1U0-2U0-2O7-2U0-3U0-3U0-3O8-4U0-4U0-4U0-5O7-5U0-5O8-6U0-6U0-6U0-4U0-4U0-4O2-5U0-5U0-5U0-6O6-6U0-6U0-4U0-4U0-4U0-5O1-5U0-5O2-6U0-6U0-6U0-7O9-7U0-7U0-8U0-8O2-8U0-9U0-9U0-9O5-7U0-7O2-7U0-8U0-8U0-8U0-9U0-9O4-9U0-7O1-7U0-7O4-8U0-8U0-8U0-9O9-9U0-9O7-x1O2-1U0-1O5-2U0-2U0-2U0-3O3-3U0-3O7-1U0-1O1-1U0-2U0-2U0-2U0-3U0-3O6-3U0-1O4-1U0-1U0-2U0-2O1-2U0-3U0-3U0-3O8-4U0-4U0-4U0-5O2-5U0-5O9-6U0-6U0-6U0-4U0-4U0-4O8-5U0-5U0-5U0-6O6-6U0-6U0-4U0-4U0-4U0-5O1-5U0-5O4-6U0-6U0-6U0-7O7-7U0-7U0-8U0-8O9-8U0-9U0-9U0-9O6-7U0-7O3-7U0-8U0-8U0-8U0-9U0-9O9-9U0-7O6-7U0-7O4-8U0-8U0-8U0-9O5-9U0-9O3-;&quot;);</span>
<span class="nc" id="L37">            presaved02wr.close();</span>
<span class="nc" id="L38">            File presaved03 = new File(appdir + &quot;\\freeform01.txt&quot;);</span>
<span class="nc" id="L39">            presaved03.createNewFile();</span>
<span class="nc" id="L40">            FileWriter presaved03wr = new FileWriter(presaved03);</span>
<span class="nc" id="L41">            presaved03wr.write(&quot;HARD;CLASSIC;false;000000;1O5-2U0-2O3-2U0-3U0-3O1-3O7-3U0-3U0-1U0-1U0-2U0-2U0-2U0-3U0-3U0-3U0-4O3-1O8-1U0-1O4-2O6-2U0-2O7-3U0-4U0-4U0-1O1-1U0-8U0-9U0-9O6-9U0-4U0-4U0-4U0-1U0-8U0-8U0-9O3-9U0-9O9-4U0-4U0-5U0-8U0-8U0-8U0-9U0-9O8-9U0-4U0-5U0-5O9-8U0-8U0-7U0-6O5-6U0-6O3-5O4-5U0-5O1-8O3-7U0-7U0-7U0-6U0-6U0-6U0-5U0-5U0-7U0-7U0-7O5-7O8-7U0-6U0-6O1-6U0-5O7-;&quot;);</span>
<span class="nc" id="L42">            presaved03wr.close();</span>
<span class="nc" id="L43">        } catch (IOException e) {</span>
<span class="nc" id="L44">            e.printStackTrace();</span>
<span class="nc" id="L45">        }</span>
<span class="nc" id="L46">    }</span>

    //---------------------------------------------------
    // -- get saved files as list or a single puzzle ----
    // --------------------------------------------------

    public static File[] getFiles() /*throws IOException*/ {

<span class="nc" id="L54">        String OS = (System.getProperty(&quot;os.name&quot;)).toUpperCase();</span>
        File path;
<span class="nc bnc" id="L56" title="All 2 branches missed.">        if (OS.contains(&quot;WIN&quot;)) {</span>
<span class="nc" id="L57">            path = new File(System.getenv(&quot;APPDATA&quot;)+&quot;\\SudokuGR04&quot;);</span>
        }
        else
        {
<span class="nc" id="L61">            path = new File(System.getProperty(&quot;user.home&quot; + &quot;/Library/Application Support/SudokuGR04&quot; ));</span>
        }

<span class="nc" id="L64">        FileFilter fileFilter = new FileFilter() {</span>
            @Override
            public boolean accept(File dir) {
<span class="nc bnc" id="L67" title="All 2 branches missed.">                if (dir.isFile()) {</span>
<span class="nc" id="L68">                    return true;</span>
                } else {
<span class="nc" id="L70">                    return false;</span>
                }
            }
        };
        //in the files-array there is a list of all files in the dir
<span class="nc" id="L75">        files = path.listFiles(fileFilter);</span>
<span class="nc bnc" id="L76" title="All 2 branches missed.">        for (File i : files) {</span>
<span class="nc" id="L77">            System.out.println(i);</span>
        }
<span class="nc" id="L79">        return files;</span>
    }

    public ArrayList&lt;Puzzle&gt; getStoredPuzzles() {
<span class="nc" id="L83">        files = getFiles();</span>
<span class="nc" id="L84">        storedPuzzles = new ArrayList&lt;Puzzle&gt;();</span>
<span class="nc" id="L85">        System.out.println();</span>
<span class="nc bnc" id="L86" title="All 2 branches missed.">        for (int j = 0; j &lt;= files.length; j++) {</span>
            try {
<span class="nc" id="L88">                storedPuzzles.add(loadPuzzle(j));</span>
<span class="nc" id="L89">            } catch(Exception e) {</span>
<span class="nc" id="L90">                System.out.println(&quot;EXPECTICOTIDON&quot;);}</span>
        }
<span class="nc" id="L92">        return storedPuzzles;</span>
    }


    public static Puzzle loadPuzzle(int nrOfFile) throws Exception {
<span class="nc" id="L97">        files = getFiles();</span>
<span class="nc" id="L98">        FileReader fileReader = new FileReader(files[nrOfFile]);</span>

<span class="nc" id="L100">        String name = files[0].toString();</span>
<span class="nc" id="L101">        Difficulty difficulty = null;</span>
<span class="nc" id="L102">        Type type = null;</span>
<span class="nc" id="L103">        boolean solved = true;</span>
<span class="nc" id="L104">        int timeUsed = 0;</span>
<span class="nc" id="L105">        String contentString = &quot;&quot;;</span>

        int i;
<span class="nc" id="L108">        StringBuilder sb = new StringBuilder();</span>
<span class="nc" id="L109">        int stage = 0;</span>
        // String parser
<span class="nc bnc" id="L111" title="All 2 branches missed.">        while ((i = fileReader.read()) != -1) {</span>
<span class="nc bnc" id="L112" title="All 2 branches missed.">            if ((char) i == ';') {</span>
<span class="nc bnc" id="L113" title="All 6 branches missed.">                switch (stage) {</span>
                    case 0: // first block: difficulty
<span class="nc" id="L115">                        difficulty = Difficulty.valueOf(sb.toString());</span>
<span class="nc" id="L116">                        System.out.println(difficulty);</span>
<span class="nc" id="L117">                        break;</span>
                    case 1: // second: model.Type of model.Puzzle
<span class="nc" id="L119">                        type = Type.valueOf(sb.toString());</span>
<span class="nc" id="L120">                        System.out.println(type);</span>
<span class="nc" id="L121">                        break;</span>
                    case 2: // third: solved
<span class="nc bnc" id="L123" title="All 2 branches missed.">                        if (sb.toString() == &quot;true&quot;)</span>
<span class="nc" id="L124">                            solved = true;</span>
                        else
<span class="nc" id="L126">                            solved = false;</span>
<span class="nc" id="L127">                        System.out.println(solved);</span>
<span class="nc" id="L128">                        break;</span>
                    case 3: //fourth: timeUsed
<span class="nc" id="L130">                        timeUsed = Integer.parseInt(sb.toString());</span>
<span class="nc" id="L131">                        System.out.println(timeUsed);</span>
<span class="nc" id="L132">                        break;</span>
                    case 4: // fifth: ContentString
<span class="nc" id="L134">                        contentString = sb.toString();</span>
<span class="nc" id="L135">                        System.out.println(contentString);</span>
<span class="nc" id="L136">                        break;</span>
                    default:
<span class="nc" id="L138">                        throw new Exception();</span>
                }
<span class="nc" id="L140">                sb = new StringBuilder();</span>
<span class="nc" id="L141">                stage++;</span>
            } else {
<span class="nc" id="L143">                sb.append((char) i);</span>
            }
        }

<span class="nc bnc" id="L147" title="All 2 branches missed.">        if (contentString.length() == 324) {</span>
<span class="nc" id="L148">            return new Ninesquare(name, difficulty, type, solved, timeUsed, contentString);</span>
<span class="nc bnc" id="L149" title="All 2 branches missed.">        } else if (contentString.length() == 1624) {</span>
<span class="nc" id="L150">            return new Samurai(name, difficulty, type, solved, timeUsed, contentString);</span>
        } else {
<span class="nc" id="L152">            System.out.println(contentString.length());</span>
<span class="nc" id="L153">            throw new Exception();</span>
        }

    }

    // ---------------------------------------------------------
    // -- save a model.Puzzle to disc after playing ------------------
    // ---------------------------------------------------------

    // TODO

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>